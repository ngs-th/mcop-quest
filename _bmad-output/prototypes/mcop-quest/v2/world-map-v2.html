<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
        />
        <title>MCOP Quest - World Map</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=VT323&display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                --bg-parchment: #e8dcc0;
                --bg-parchment-dark: #d4c8a8;
                --border-gold: #c9a227;
                --text-dark: #2c2416;
            }

            body {
                font-family: "VT323", monospace;
                background: #1a1510;
                color: var(--text-dark);
            }

            .font-fantasy {
                font-family: "Cinzel", serif;
            }

            .golden-frame {
                border: 8px solid var(--border-gold);
                border-image: linear-gradient(
                        135deg,
                        #bf953f 0%,
                        #fcf6ba 25%,
                        #b38728 50%,
                        #fbf5b7 75%,
                        #aa771c 100%
                    )
                    1;
                box-shadow:
                    inset 0 0 30px rgba(0, 0, 0, 0.5),
                    0 0 20px rgba(201, 162, 39, 0.3);
            }

            .parchment {
                background: linear-gradient(
                    135deg,
                    #e8dcc0 0%,
                    #d4c8a8 50%,
                    #c9b896 100%
                );
                position: relative;
            }

            .parchment::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E");
                opacity: 0.4;
                pointer-events: none;
            }

            .water-area {
                background: linear-gradient(135deg, #4a90a4 0%, #2d5a6b 100%);
                border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
                position: absolute;
            }

            .location-marker {
                position: absolute;
                transform: translate(-50%, -50%);
                cursor: pointer;
                transition: all 0.2s;
                z-index: 10;
            }

            .location-marker:hover {
                transform: translate(-50%, -55%) scale(1.05);
                z-index: 20;
                filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4));
            }

            .health-bar {
                position: absolute;
                width: 140px;
                height: 18px;
                left: 50%;
                transform: translateX(-50%);
                top: -28px;
            }

            .health-bar-bg {
                width: 100%;
                height: 100%;
                background: #2a2015;
                border-radius: 4px;
                border: 2px solid #5a4a3a;
                overflow: hidden;
            }

            .health-bar-fill {
                height: 100%;
                border-radius: 2px;
            }

            .health-full {
                background: linear-gradient(180deg, #66bb6a 0%, #4cae4c 100%);
            }
            .health-stable {
                background: linear-gradient(180deg, #5bc0de 0%, #46b8da 100%);
            }
            .health-medium {
                background: linear-gradient(180deg, #f0ad4e 0%, #ec971f 100%);
            }
            .health-low {
                background: linear-gradient(180deg, #d9534f 0%, #c9302c 100%);
            }

            .banner-label {
                position: absolute;
                background: linear-gradient(135deg, #5d4037 0%, #3e2723 100%);
                border: 2px solid var(--border-gold);
                padding: 6px 16px;
                font-size: 11px;
                letter-spacing: 0.5px;
                color: #e8d478;
                white-space: nowrap;
                left: 50%;
                transform: translateX(-50%);
                clip-path: polygon(
                    8% 0,
                    92% 0,
                    100% 50%,
                    92% 100%,
                    8% 100%,
                    0% 50%
                );
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
                z-index: 15;
            }

            .pixel-art {
                image-rendering: pixelated;
                image-rendering: -moz-crisp-edges;
                image-rendering: crisp-edges;
            }

            .resource-counter {
                background: linear-gradient(135deg, #2c2416 0%, #1a1510 100%);
                border: 2px solid var(--border-gold);
                padding: 6px 14px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .sidebar-btn {
                background: linear-gradient(135deg, #4a4035 0%, #2d2820 100%);
                border: 3px solid var(--border-gold);
                transition: all 0.2s;
            }

            .sidebar-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(201, 162, 39, 0.4);
            }

            .sidebar-btn.active {
                background: linear-gradient(135deg, #6a6055 0%, #4a4035 100%);
                box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);
            }

            .glow-green {
                filter: drop-shadow(0 0 15px rgba(76, 175, 80, 0.6));
            }
            .glow-blue {
                filter: drop-shadow(0 0 15px rgba(33, 150, 243, 0.6));
            }
            .glow-purple {
                filter: drop-shadow(0 0 15px rgba(156, 39, 176, 0.6));
            }
            .glow-red {
                filter: drop-shadow(0 0 20px rgba(244, 67, 54, 0.7));
            }

            /* ===== MAP SCROLL CONTAINER ===== */
            .map-scroll-container {
                overflow: auto;
                -webkit-overflow-scrolling: touch;
                cursor: grab;
                position: relative;
                scrollbar-width: thin;
                scrollbar-color: var(--border-gold) rgba(0, 0, 0, 0.2);
            }

            .map-scroll-container:active {
                cursor: grabbing;
            }

            .map-scroll-container::-webkit-scrollbar {
                width: 10px;
                height: 10px;
            }

            .map-scroll-container::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.15);
                border-radius: 5px;
            }

            .map-scroll-container::-webkit-scrollbar-thumb {
                background: linear-gradient(
                    135deg,
                    #bf953f 0%,
                    #fcf6ba 50%,
                    #b38728 100%
                );
                border-radius: 5px;
                border: 2px solid rgba(0, 0, 0, 0.3);
            }

            .map-scroll-container::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(
                    135deg,
                    #e8c547 0%,
                    #fff8d1 50%,
                    #d4a840 100%
                );
            }

            /* Mobile optimizations */
            @media (max-width: 768px) {
                .map-scroll-container {
                    min-height: 500px !important;
                }

                .location-marker img {
                    max-width: 80px !important;
                    max-height: 80px !important;
                }

                .health-bar {
                    width: 80px !important;
                    height: 12px !important;
                    top: -20px !important;
                }

                .banner-label {
                    font-size: 8px !important;
                    padding: 3px 10px !important;
                }

                .sidebar-btn span {
                    font-size: 8px !important;
                }
            }

            /* Pan hint animation */
            .pan-hint {
                animation: panHint 2s ease-in-out infinite;
            }

            @keyframes panHint {
                0%,
                100% {
                    transform: translateX(0);
                    opacity: 1;
                }
                50% {
                    transform: translateX(8px);
                    opacity: 0.7;
                }
            }
        </style>
    </head>
    <body class="min-h-screen p-4">
        <div class="max-w-[1400px] mx-auto">
            <!-- Header -->
            <div class="flex items-center justify-between mb-4 px-4">
                <h1
                    class="font-fantasy text-5xl font-bold text-amber-400 drop-shadow-lg"
                    style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5)"
                >
                    MCOP Quest
                </h1>
                <div class="flex gap-4">
                    <div class="resource-counter rounded-lg">
                        <img
                            src="assets-pixels/ui/coin.png"
                            alt="Gold"
                            class="w-6 h-6 pixel-art"
                        />
                        <span class="text-amber-300 text-xl">2,450</span>
                    </div>
                    <div class="resource-counter rounded-lg">
                        <img
                            src="assets-pixels/ui/gem.png"
                            alt="Gems"
                            class="w-6 h-6 pixel-art"
                        />
                        <span class="text-cyan-300 text-xl">15</span>
                    </div>
                </div>
            </div>

            <!-- Main Game Frame -->
            <div class="golden-frame rounded-lg overflow-hidden">
                <div class="parchment min-h-[800px] flex">
                    <!-- Left Sidebar -->
                    <div
                        class="w-24 bg-gradient-to-b from-amber-900/40 via-amber-800/30 to-amber-950/40 p-2 flex flex-col gap-3 border-r-4 border-amber-700/50"
                    >
                        <!-- Compass -->
                        <div
                            class="w-16 h-16 mx-auto mb-2 bg-amber-100/20 rounded-full p-1"
                        >
                            <img
                                src="assets-pixels/ui/compass.png"
                                alt="Compass"
                                class="w-full h-full pixel-art"
                            />
                        </div>

                        <!-- World Button -->
                        <button
                            class="sidebar-btn rounded-lg p-2 flex flex-col items-center gap-1 active"
                        >
                            <div
                                class="w-12 h-12 rounded-full bg-blue-500/30 border-2 border-blue-400 flex items-center justify-center overflow-hidden"
                            >
                                <img
                                    src="assets-pixels/terrain/grass.png"
                                    alt="World"
                                    class="w-full h-full pixel-art opacity-80"
                                />
                            </div>
                            <span
                                class="text-amber-200 text-[10px] font-fantasy"
                                >WORLD</span
                            >
                        </button>

                        <!-- Party Button -->
                        <button
                            class="sidebar-btn rounded-lg p-2 flex flex-col items-center gap-1"
                        >
                            <div
                                class="w-12 h-12 rounded-full bg-purple-500/30 border-2 border-purple-400 flex items-center justify-center overflow-hidden"
                            >
                                <img
                                    src="assets-pixels/characters/party.png"
                                    alt="Party"
                                    class="w-full h-full pixel-art"
                                />
                            </div>
                            <span
                                class="text-amber-200 text-[10px] font-fantasy"
                                >PARTY</span
                            >
                        </button>

                        <!-- Hero Button -->
                        <button
                            class="sidebar-btn rounded-lg p-2 flex flex-col items-center gap-1"
                        >
                            <div
                                class="w-12 h-12 rounded-full bg-amber-500/30 border-2 border-amber-400 flex items-center justify-center overflow-hidden"
                            >
                                <img
                                    src="assets-pixels/characters/warrior.png"
                                    alt="Hero"
                                    class="w-full h-full pixel-art"
                                />
                            </div>
                            <span
                                class="text-amber-200 text-[10px] font-fantasy"
                                >HERO</span
                            >
                        </button>
                    </div>

                    <!-- Map Area - Reference Layout -->
                    <div
                        class="map-scroll-container flex-1 relative"
                        id="mapContainer"
                        style="min-height: 800px; min-width: 1000px"
                    >
                        <!-- Water Areas - Based on reference -->
                        <div
                            class="water-area opacity-70"
                            style="left: 2%; top: 8%; width: 35%; height: 40%"
                        ></div>
                        <div
                            class="water-area opacity-60"
                            style="
                                right: 5%;
                                bottom: 10%;
                                width: 30%;
                                height: 35%;
                            "
                        ></div>

                        <!-- ====== TOP LEFT AREA ====== -->
                        <!-- Mountain (Top Left) -->
                        <div class="location-marker" style="left: 8%; top: 12%">
                            <img
                                src="assets-pixels/terrain/mountain.png"
                                alt="Mountain"
                                class="w-32 h-24 pixel-art"
                            />
                        </div>

                        <!-- Crystal Island -->
                        <div
                            class="location-marker"
                            style="left: 15%; top: 22%"
                        >
                            <img
                                src="assets-pixels/terrain/island.png"
                                alt="Crystal Island"
                                class="w-28 h-20 pixel-art glow-blue"
                            />
                        </div>

                        <!-- ====== CENTER - MAIN CASTLE ====== -->
                        <div
                            class="location-marker"
                            style="left: 45%; top: 35%"
                        >
                            <!-- Health Bar -->
                            <div class="health-bar">
                                <div class="health-bar-bg">
                                    <div
                                        class="health-bar-fill health-full"
                                        style="width: 100%"
                                    ></div>
                                </div>
                            </div>
                            <!-- Banner -->
                            <div class="banner-label" style="top: -52px">
                                MEMBER CITY SYSTEM MODULE â€” HEALTH: FULL
                            </div>
                            <!-- Building -->
                            <img
                                src="assets-pixels/structures/main_castle.png"
                                alt="Main Castle"
                                class="w-48 h-44 pixel-art glow-green drop-shadow-2xl"
                            />

                            <!-- Character indicators around castle -->
                            <div class="absolute" style="left: 40%; top: 60%">
                                <img
                                    src="assets-pixels/characters/map_char.png"
                                    alt="Player"
                                    class="w-6 h-6 pixel-art"
                                />
                            </div>
                            <div class="absolute" style="left: 55%; top: 65%">
                                <img
                                    src="assets-pixels/characters/map_char.png"
                                    alt="Player"
                                    class="w-6 h-6 pixel-art"
                                />
                            </div>
                            <div class="absolute" style="left: 48%; top: 70%">
                                <img
                                    src="assets-pixels/characters/map_char.png"
                                    alt="Player"
                                    class="w-6 h-6 pixel-art"
                                />
                            </div>
                        </div>

                        <!-- Arrow: Castle -> Task Tower -->
                        <div class="absolute" style="left: 58%; top: 28%">
                            <img
                                src="assets-pixels/ui/arrow_right.png"
                                alt="Connection"
                                class="w-8 h-8 pixel-art rotate-45"
                            />
                        </div>

                        <!-- ====== TOP RIGHT - TASK TOWER ====== -->
                        <div
                            class="location-marker"
                            style="left: 75%; top: 22%"
                        >
                            <div class="health-bar">
                                <div class="health-bar-bg">
                                    <div
                                        class="health-bar-fill health-stable"
                                        style="width: 85%"
                                    ></div>
                                </div>
                            </div>
                            <div class="banner-label" style="top: -52px">
                                TASK TOWER
                            </div>
                            <img
                                src="assets-pixels/structures/task_tower.png"
                                alt="Task Tower"
                                class="w-40 h-52 pixel-art glow-blue drop-shadow-xl"
                            />
                            <div
                                class="absolute -right-20 top-12 text-xs text-blue-300 font-bold"
                            >
                                HEALTH: STABLE
                            </div>
                        </div>

                        <!-- Arrow: Task Tower -> Bug Bastion -->
                        <div class="absolute" style="left: 82%; top: 42%">
                            <img
                                src="assets-pixels/ui/arrow_down.png"
                                alt="Connection"
                                class="w-7 h-7 pixel-art"
                            />
                        </div>

                        <!-- ====== RIGHT MIDDLE - BUG BASTION ====== -->
                        <div
                            class="location-marker"
                            style="left: 85%; top: 48%"
                        >
                            <div class="banner-label" style="top: -36px">
                                BUG BASTION
                            </div>
                            <img
                                src="assets-pixels/structures/bug_bastion.png"
                                alt="Bug Bastion"
                                class="w-40 h-36 pixel-art drop-shadow-lg"
                            />
                        </div>

                        <!-- Arrow: Castle -> Alchemy Lab -->
                        <div class="absolute" style="left: 32%; top: 42%">
                            <img
                                src="assets-pixels/ui/arrow_left.png"
                                alt="Connection"
                                class="w-7 h-7 pixel-art -rotate-45"
                            />
                        </div>

                        <!-- ====== LEFT - ANALYTICS ALCHEMY LAB ====== -->
                        <div
                            class="location-marker"
                            style="left: 22%; top: 45%"
                        >
                            <div class="health-bar">
                                <div class="health-bar-bg">
                                    <div
                                        class="health-bar-fill health-stable"
                                        style="width: 75%"
                                    ></div>
                                </div>
                            </div>
                            <div
                                class="banner-label"
                                style="top: -52px; font-size: 10px"
                            >
                                ANALYTICS ALCHEMY LAB
                            </div>
                            <img
                                src="assets-pixels/structures/alchemy_lab.png"
                                alt="Alchemy Lab"
                                class="w-36 h-36 pixel-art glow-purple drop-shadow-lg"
                            />
                        </div>

                        <!-- Bridge near Alchemy Lab -->
                        <div class="absolute" style="left: 28%; top: 52%">
                            <img
                                src="assets-pixels/terrain/bridge.png"
                                alt="Bridge"
                                class="w-20 h-10 pixel-art rotate-12"
                            />
                        </div>

                        <!-- Arrow: Alchemy Lab -> Community Commons -->
                        <div class="absolute" style="left: 34%; top: 60%">
                            <img
                                src="assets-pixels/ui/arrow_down.png"
                                alt="Connection"
                                class="w-7 h-7 pixel-art rotate-45"
                            />
                        </div>

                        <!-- ====== BOTTOM CENTER - COMMUNITY COMMONS ====== -->
                        <div
                            class="location-marker"
                            style="left: 45%; top: 72%"
                        >
                            <img
                                src="assets-pixels/structures/community_commons.png"
                                alt="Community Commons"
                                class="w-36 h-32 pixel-art drop-shadow-lg"
                            />
                            <div class="banner-label" style="bottom: -28px">
                                COMMUNITY COMMONS
                            </div>
                        </div>

                        <!-- Arrow: Community Commons -> Payment Fortress -->
                        <div class="absolute" style="left: 58%; top: 68%">
                            <img
                                src="assets-pixels/ui/arrow_right.png"
                                alt="Connection"
                                class="w-7 h-7 pixel-art -rotate-12"
                            />
                        </div>

                        <!-- ====== BOTTOM RIGHT - PAYMENT FORTRESS ====== -->
                        <div
                            class="location-marker"
                            style="left: 75%; top: 70%"
                        >
                            <div class="health-bar">
                                <div class="health-bar-bg">
                                    <div
                                        class="health-bar-fill health-low"
                                        style="width: 25%"
                                    ></div>
                                </div>
                            </div>
                            <div
                                class="banner-label"
                                style="
                                    top: -56px;
                                    font-size: 9px;
                                    line-height: 1.2;
                                    padding: 8px 20px;
                                "
                            >
                                PAYMENT FORTRESS: BILLING & PAYMENTS<br />HEALTH:
                                LOW (FOG OF WAR)
                            </div>

                            <!-- Warning Icon -->
                            <div class="absolute -right-16 top-0 animate-pulse">
                                <img
                                    src="assets-pixels/ui/warning.png"
                                    alt="Warning"
                                    class="w-12 h-12 pixel-art"
                                />
                            </div>

                            <img
                                src="assets-pixels/structures/payment_fortress.png"
                                alt="Payment Fortress"
                                class="w-44 h-48 pixel-art glow-red drop-shadow-2xl"
                            />

                            <!-- Storm cloud effect -->
                            <div
                                class="absolute -top-6 left-1/2 -translate-x-1/2 w-36 h-16 bg-purple-900/50 rounded-full blur-xl"
                            ></div>
                            <div
                                class="absolute -top-3 left-1/2 -translate-x-1/2 w-28 h-12 bg-purple-800/40 rounded-full blur-lg"
                            ></div>
                        </div>

                        <!-- Arrow: Bug Bastion -> Payment Fortress -->
                        <div class="absolute" style="left: 82%; top: 62%">
                            <img
                                src="assets-pixels/ui/arrow_down.png"
                                alt="Connection"
                                class="w-7 h-7 pixel-art"
                            />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Info Bar -->
            <div
                class="mt-4 flex items-center justify-between px-6 py-4 bg-gradient-to-r from-amber-900/60 via-amber-800/40 to-amber-900/60 rounded-lg border border-amber-700/50"
            >
                <div class="flex items-center gap-6">
                    <span class="text-amber-200 text-lg"
                        >Location:
                        <span class="text-white font-bold"
                            >World Map</span
                        ></span
                    >
                    <span class="text-amber-600">|</span>
                    <span class="text-amber-200 text-lg"
                        >Active Tasks:
                        <span class="text-green-400 font-bold">5</span></span
                    >
                </div>
                <div class="flex items-center gap-3">
                    <!-- Mobile pan hint -->
                    <span
                        class="text-amber-400 text-sm md:hidden flex items-center gap-1"
                    >
                        <svg
                            class="w-4 h-4 pan-hint"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
                                clip-rule="evenodd"
                            />
                        </svg>
                        Drag to pan
                    </span>
                    <span class="text-amber-300 hidden md:inline"
                        >Select a location to view tasks</span
                    >
                    <img
                        src="assets-pixels/ui/arrow_right.png"
                        alt="Hint"
                        class="w-5 h-5 pixel-art opacity-60"
                    />
                </div>
            </div>
        </div>
        <!-- Map Pan/Drag Script -->
        <script>
            (function () {
                const container = document.getElementById("mapContainer");
                if (!container) return;

                // Desktop: Mouse drag with threshold
                let isMouseDown = false;
                let startX, startY, scrollLeft, scrollTop;
                let hasDragged = false;

                container.addEventListener("mousedown", (e) => {
                    if (e.target.closest(".location-marker")) return;

                    isMouseDown = true;
                    hasDragged = false;
                    startX = e.pageX;
                    startY = e.pageY;
                    scrollLeft = container.scrollLeft;
                    scrollTop = container.scrollTop;
                });

                container.addEventListener("mousemove", (e) => {
                    if (!isMouseDown) return;

                    const dx = Math.abs(e.pageX - startX);
                    const dy = Math.abs(e.pageY - startY);

                    // Only drag if moved more than 5px
                    if (dx > 5 || dy > 5) {
                        hasDragged = true;
                        container.style.cursor = "grabbing";
                        e.preventDefault();

                        const walkX = (e.pageX - startX) * 1.2;
                        const walkY = (e.pageY - startY) * 1.2;
                        container.scrollLeft = scrollLeft - walkX;
                        container.scrollTop = scrollTop - walkY;
                    }
                });

                container.addEventListener("mouseup", () => {
                    isMouseDown = false;
                    container.style.cursor = "grab";
                });

                container.addEventListener("mouseleave", () => {
                    isMouseDown = false;
                    container.style.cursor = "grab";
                });

                // Mobile: Native scroll (CSS overflow: auto handles this)
                // No JavaScript touch handlers needed - let browser handle it

                // Center the map on load
                window.addEventListener("load", () => {
                    const targetX = container.scrollWidth * 0.25;
                    container.scrollLeft = targetX;
                });
            })();
        </script>
    </body>
</html>
